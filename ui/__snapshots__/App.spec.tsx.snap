// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`render the app 1`] = `
<div>
  <div
    class="MuiContainer-root MuiContainer-maxWidthLg"
  >
    <div
      class="MuiGrid-root MuiGrid-container MuiGrid-align-items-xs-center"
    >
      <div
        class="MuiGrid-root MuiGrid-item MuiGrid-grid-sm-12 MuiGrid-grid-lg-8"
      >
        <div
          class="MuiContainer-root MuiContainer-maxWidthLg"
        >
          <div
            class="MuiContainer-root MuiContainer-maxWidthLg"
          >
            <div
              class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-3"
            >
              <div
                class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-3"
              >
                <h2
                  class="MuiTypography-root MuiTypography-h2"
                >
                  rego.fyi
                </h2>
              </div>
              <div
                class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-9"
              />
            </div>
          </div>
          <div
            class="MuiContainer-root MuiContainer-maxWidthLg"
          >
            <div
              class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-3"
            >
              <div
                class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-6"
              >
                <div
                  class="MuiFormControl-root"
                >
                  <label
                    class="MuiFormLabel-root MuiInputLabel-root MuiInputLabel-formControl MuiInputLabel-animated MuiInputLabel-shrink MuiFormLabel-filled"
                    data-shrink="true"
                  >
                    Method
                  </label>
                  <div
                    class="MuiInputBase-root MuiInput-root MuiInput-underline MuiInputBase-formControl MuiInput-formControl"
                  >
                    <div
                      aria-haspopup="listbox"
                      class="MuiSelect-root MuiSelect-select MuiSelect-selectMenu MuiInputBase-input MuiInput-input"
                      role="button"
                      tabindex="0"
                    >
                      GET
                    </div>
                    <input
                      aria-hidden="true"
                      class="MuiSelect-nativeInput"
                      tabindex="-1"
                      value="GET"
                    />
                    <svg
                      aria-hidden="true"
                      class="MuiSvgIcon-root MuiSelect-icon"
                      focusable="false"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M7 10l5 5 5-5z"
                      />
                    </svg>
                  </div>
                </div>
              </div>
              <div
                class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-6"
              >
                <div
                  class="MuiFormControl-root"
                >
                  <div
                    class="MuiFormControl-root MuiTextField-root"
                  >
                    <label
                      class="MuiFormLabel-root MuiInputLabel-root MuiInputLabel-formControl MuiInputLabel-animated MuiInputLabel-shrink MuiFormLabel-filled"
                      data-shrink="true"
                    >
                      Resource
                    </label>
                    <div
                      class="MuiInputBase-root MuiInput-root MuiInput-underline MuiInputBase-formControl MuiInput-formControl"
                    >
                      <input
                        aria-invalid="false"
                        class="MuiInputBase-input MuiInput-input"
                        type="text"
                        value="/orders"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="MuiContainer-root MuiContainer-maxWidthLg"
          >
            <fieldset
              class="MuiFormControl-root MuiFormControl-fullWidth"
            >
              <div
                class="MuiFormControl-root MuiTextField-root MuiFormControl-fullWidth"
              >
                <label
                  class="MuiFormLabel-root MuiInputLabel-root MuiInputLabel-formControl MuiInputLabel-animated MuiInputLabel-shrink MuiInputLabel-filled MuiFormLabel-filled"
                  data-shrink="true"
                  for="User info such as a JWT or session"
                  id="User info such as a JWT or session-label"
                >
                  User info such as a JWT or session
                </label>
                <div
                  class="MuiInputBase-root MuiFilledInput-root MuiFilledInput-underline MuiInputBase-fullWidth MuiInputBase-formControl MuiInputBase-multiline MuiFilledInput-multiline"
                >
                  <textarea
                    aria-invalid="false"
                    class="MuiInputBase-input MuiFilledInput-input MuiInputBase-inputMultiline MuiFilledInput-inputMultiline"
                    id="User info such as a JWT or session"
                    rows="1"
                    style="height: 0px; overflow: hidden;"
                  >
                    {"permissions":["start_order"],"subscriptions":["newsletter"],"userId":12345}
                  </textarea>
                  <textarea
                    aria-hidden="true"
                    class="MuiInputBase-input MuiFilledInput-input MuiInputBase-inputMultiline MuiFilledInput-inputMultiline"
                    readonly=""
                    style="visibility: hidden; position: absolute; overflow: hidden; height: 0px; top: 0px; left: 0px; transform: translateZ(0); width: 100%;"
                    tabindex="-1"
                  />
                </div>
              </div>
            </fieldset>
          </div>
          <div
            class="MuiContainer-root MuiContainer-maxWidthLg"
          >
            <fieldset
              class="MuiFormControl-root MuiFormControl-fullWidth"
            >
              <div
                class="MuiFormControl-root MuiTextField-root MuiFormControl-fullWidth"
              >
                <label
                  class="MuiFormLabel-root MuiInputLabel-root MuiInputLabel-formControl MuiInputLabel-animated MuiInputLabel-shrink MuiInputLabel-filled MuiFormLabel-filled"
                  data-shrink="true"
                  for="Rego policy loaded from disk or other storage"
                  id="Rego policy loaded from disk or other storage-label"
                >
                  Rego policy loaded from disk or other storage
                </label>
                <div
                  class="MuiInputBase-root MuiFilledInput-root MuiFilledInput-underline MuiInputBase-fullWidth MuiInputBase-formControl MuiInputBase-multiline MuiFilledInput-multiline"
                >
                  <textarea
                    aria-invalid="false"
                    class="MuiInputBase-input MuiFilledInput-input MuiInputBase-inputMultiline MuiFilledInput-inputMultiline"
                    id="Rego policy loaded from disk or other storage"
                    rows="1"
                    style="height: 0px; overflow: hidden;"
                  >
                    package policy

import data.requests
import data.permissions
import data.subscriptions

default allow = false

allow {
    check_policy[input]
}

check_policy[input] {
    r = requests[_]
    some i; match_with_wildcard(permissions, input.permissions[i])
    some j; match_with_wildcard(subscriptions, input.subscriptions[j])
    match_with_wildcard(r.methods, input.method)
    match_with_wildcard(r.resources, input.resource)
}

match_with_wildcard(allowed, value) {
    allowed[_] = "*"
}
match_with_wildcard(allowed, value) {
    allowed[_] = value
}

                  </textarea>
                  <textarea
                    aria-hidden="true"
                    class="MuiInputBase-input MuiFilledInput-input MuiInputBase-inputMultiline MuiFilledInput-inputMultiline"
                    readonly=""
                    style="visibility: hidden; position: absolute; overflow: hidden; height: 0px; top: 0px; left: 0px; transform: translateZ(0); width: 100%;"
                    tabindex="-1"
                  />
                </div>
              </div>
            </fieldset>
          </div>
          <div
            class="MuiContainer-root MuiContainer-maxWidthLg"
          >
            <fieldset
              class="MuiFormControl-root MuiFormControl-fullWidth"
            >
              <div
                class="MuiFormControl-root MuiTextField-root MuiFormControl-fullWidth"
              >
                <label
                  class="MuiFormLabel-root MuiInputLabel-root MuiInputLabel-formControl MuiInputLabel-animated MuiInputLabel-shrink MuiInputLabel-filled MuiFormLabel-filled"
                  data-shrink="true"
                  for="Data loaded from disk or other storage for making policy decisions"
                  id="Data loaded from disk or other storage for making policy decisions-label"
                >
                  Data loaded from disk or other storage for making policy decisions
                </label>
                <div
                  class="MuiInputBase-root MuiFilledInput-root MuiFilledInput-underline MuiInputBase-fullWidth MuiInputBase-formControl MuiInputBase-multiline MuiFilledInput-multiline"
                >
                  <textarea
                    aria-invalid="false"
                    class="MuiInputBase-input MuiFilledInput-input MuiInputBase-inputMultiline MuiFilledInput-inputMultiline"
                    id="Data loaded from disk or other storage for making policy decisions"
                    rows="1"
                    style="height: 0px; overflow: hidden;"
                  >
                    {"requests":[{"methods":["GET"],"resources":["/orders"]}],"permissions":["start_order","view_invoice"],"subscriptions":["newsletter"]}
                  </textarea>
                  <textarea
                    aria-hidden="true"
                    class="MuiInputBase-input MuiFilledInput-input MuiInputBase-inputMultiline MuiFilledInput-inputMultiline"
                    readonly=""
                    style="visibility: hidden; position: absolute; overflow: hidden; height: 0px; top: 0px; left: 0px; transform: translateZ(0); width: 100%;"
                    tabindex="-1"
                  />
                </div>
              </div>
            </fieldset>
          </div>
          <button
            class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary"
            tabindex="0"
            type="button"
          >
            <span
              class="MuiButton-label"
            >
              Send Request
            </span>
            <span
              class="MuiTouchRipple-root"
            />
          </button>
        </div>
      </div>
      <div
        class="MuiGrid-root MuiGrid-item MuiGrid-grid-sm-12 MuiGrid-grid-lg-4"
      >
        <div
          class="MuiContainer-root MuiContainer-maxWidthLg"
        >
          <div
            class="MuiPaper-root MuiAccordion-root MuiAccordion-rounded MuiPaper-elevation1 MuiPaper-rounded"
          >
            <div
              area-controls="panel1a-content"
              aria-disabled="false"
              aria-expanded="false"
              class="MuiButtonBase-root MuiAccordionSummary-root"
              role="button"
              tabindex="0"
            >
              <div
                class="MuiAccordionSummary-content"
              >
                <h4
                  class="MuiTypography-root MuiTypography-h4"
                >
                  What is this?
                </h4>
              </div>
              <div
                aria-disabled="false"
                aria-hidden="true"
                class="MuiButtonBase-root MuiIconButton-root MuiAccordionSummary-expandIcon MuiIconButton-edgeEnd"
              >
                <span
                  class="MuiIconButton-label"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"
                    />
                  </svg>
                </span>
                <span
                  class="MuiTouchRipple-root"
                />
              </div>
            </div>
            <div
              class="MuiCollapse-container MuiCollapse-hidden"
              style="min-height: 0px;"
            >
              <div
                class="MuiCollapse-wrapper"
              >
                <div
                  class="MuiCollapse-wrapperInner"
                >
                  <div
                    role="region"
                  >
                    <div
                      class="MuiAccordionDetails-root"
                    >
                      <p
                        class="MuiTypography-root MuiTypography-body1"
                      >
                        I was interested to see if I could use rego in a serverless environment. I put together a demo that involved using a REST client, copying tokens around and stuff like that. I decided my demo was terrible and resolved to do something better, this, which is at least better than that demo.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="MuiPaper-root MuiAccordion-root MuiAccordion-rounded MuiPaper-elevation1 MuiPaper-rounded"
          >
            <div
              area-controls="panel1a-content"
              aria-disabled="false"
              aria-expanded="false"
              class="MuiButtonBase-root MuiAccordionSummary-root"
              role="button"
              tabindex="0"
            >
              <div
                class="MuiAccordionSummary-content"
              >
                <h4
                  class="MuiTypography-root MuiTypography-h4"
                >
                  How do I use it?
                </h4>
              </div>
              <div
                aria-disabled="false"
                aria-hidden="true"
                class="MuiButtonBase-root MuiIconButton-root MuiAccordionSummary-expandIcon MuiIconButton-edgeEnd"
              >
                <span
                  class="MuiIconButton-label"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"
                    />
                  </svg>
                </span>
                <span
                  class="MuiTouchRipple-root"
                />
              </div>
            </div>
            <div
              class="MuiCollapse-container MuiCollapse-hidden"
              style="min-height: 0px;"
            >
              <div
                class="MuiCollapse-wrapper"
              >
                <div
                  class="MuiCollapse-wrapperInner"
                >
                  <div
                    role="region"
                  >
                    <div
                      class="MuiAccordionDetails-root"
                    >
                      <p
                        class="MuiTypography-root MuiTypography-body1"
                      >
                        Edit any of the three text blocks and select an HTTP method and path. The top and bottom should have JSON data and are validated. The middle one is written in
                         
                        <a
                          class="MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-colorPrimary"
                          href="https://www.openpolicyagent.org/docs/latest/policy-language/"
                          rel="noopener"
                          target="_blank"
                        >
                          rego
                        </a>
                         
                        and isn't validated (yet) but you could use
                         
                        <a
                          class="MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-colorPrimary"
                          href="https://play.openpolicyagent.org/"
                          rel="noopener"
                          target="_blank"
                        >
                          The Rego Playground
                        </a>
                        .
                      </p>
                      <p
                        class="MuiTypography-root MuiTypography-body1"
                      >
                        When you click the SEND REQUEST button, the app will encode all three text blocks and make an HTTP request to the serverless backend. The backend will decode the token, compile the rego policy, evaluate the policy with the other payloads, then return the appropriate response.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="MuiPaper-root MuiAccordion-root MuiAccordion-rounded MuiPaper-elevation1 MuiPaper-rounded"
          >
            <div
              area-controls="panel1a-content"
              aria-disabled="false"
              aria-expanded="false"
              class="MuiButtonBase-root MuiAccordionSummary-root"
              role="button"
              tabindex="0"
            >
              <div
                class="MuiAccordionSummary-content"
              >
                <h4
                  class="MuiTypography-root MuiTypography-h4"
                >
                  Architecture
                </h4>
              </div>
              <div
                aria-disabled="false"
                aria-hidden="true"
                class="MuiButtonBase-root MuiIconButton-root MuiAccordionSummary-expandIcon MuiIconButton-edgeEnd"
              >
                <span
                  class="MuiIconButton-label"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"
                    />
                  </svg>
                </span>
                <span
                  class="MuiTouchRipple-root"
                />
              </div>
            </div>
            <div
              class="MuiCollapse-container MuiCollapse-hidden"
              style="min-height: 0px;"
            >
              <div
                class="MuiCollapse-wrapper"
              >
                <div
                  class="MuiCollapse-wrapperInner"
                >
                  <div
                    role="region"
                  >
                    <div
                      class="MuiAccordionDetails-root"
                    >
                      <p
                        class="MuiTypography-root MuiTypography-body1"
                      >
                        The web app is written in React and is an S3 website. The API uses API Gateway and Lambda. Nothing sent to the API is stored, but there's some logging in place.
                      </p>
                      <p
                        class="MuiTypography-root MuiTypography-body1"
                      >
                        The backend consists of two Lambda functions, an authorizer written in golang and a handler written in NodeJS. The authorizer is implemented with
                         
                        <a
                          class="MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-colorPrimary"
                          href="https://github.com/open-policy-agent/opa"
                          rel="noopener"
                          target="_blank"
                        >
                          opa packages
                        </a>
                        .
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="MuiPaper-root MuiAccordion-root MuiAccordion-rounded MuiPaper-elevation1 MuiPaper-rounded"
          >
            <div
              area-controls="panel1a-content"
              aria-disabled="false"
              aria-expanded="false"
              class="MuiButtonBase-root MuiAccordionSummary-root"
              role="button"
              tabindex="0"
            >
              <div
                class="MuiAccordionSummary-content"
              >
                <h4
                  class="MuiTypography-root MuiTypography-h4"
                >
                  Production use?
                </h4>
              </div>
              <div
                aria-disabled="false"
                aria-hidden="true"
                class="MuiButtonBase-root MuiIconButton-root MuiAccordionSummary-expandIcon MuiIconButton-edgeEnd"
              >
                <span
                  class="MuiIconButton-label"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"
                    />
                  </svg>
                </span>
                <span
                  class="MuiTouchRipple-root"
                />
              </div>
            </div>
            <div
              class="MuiCollapse-container MuiCollapse-hidden"
              style="min-height: 0px;"
            >
              <div
                class="MuiCollapse-wrapper"
              >
                <div
                  class="MuiCollapse-wrapperInner"
                >
                  <div
                    role="region"
                  >
                    <div
                      class="MuiAccordionDetails-root"
                    >
                      <p
                        class="MuiTypography-root MuiTypography-body1"
                      >
                        This? Nope. You don't want your authorization system to accept a policy from the client. Something like this? Very possibly.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="MuiPaper-root MuiAccordion-root MuiAccordion-rounded MuiPaper-elevation1 MuiPaper-rounded"
          >
            <div
              area-controls="panel1a-content"
              aria-disabled="false"
              aria-expanded="false"
              class="MuiButtonBase-root MuiAccordionSummary-root"
              role="button"
              tabindex="0"
            >
              <div
                class="MuiAccordionSummary-content"
              >
                <h4
                  class="MuiTypography-root MuiTypography-h4"
                >
                  Open Policy Agent
                </h4>
              </div>
              <div
                aria-disabled="false"
                aria-hidden="true"
                class="MuiButtonBase-root MuiIconButton-root MuiAccordionSummary-expandIcon MuiIconButton-edgeEnd"
              >
                <span
                  class="MuiIconButton-label"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"
                    />
                  </svg>
                </span>
                <span
                  class="MuiTouchRipple-root"
                />
              </div>
            </div>
            <div
              class="MuiCollapse-container MuiCollapse-hidden"
              style="min-height: 0px;"
            >
              <div
                class="MuiCollapse-wrapper"
              >
                <div
                  class="MuiCollapse-wrapperInner"
                >
                  <div
                    role="region"
                  >
                    <div
                      class="MuiAccordionDetails-root"
                    >
                      <p
                        class="MuiTypography-root MuiTypography-body1"
                      >
                        I'm not affiliated.
                         
                        <a
                          class="MuiTypography-root MuiLink-root MuiLink-underlineHover MuiTypography-colorPrimary"
                          href="https://www.openpolicyagent.org/"
                          rel="noopener"
                          target="_blank"
                        >
                          Learn more.
                        </a>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="MuiPaper-root MuiAccordion-root MuiAccordion-rounded MuiPaper-elevation1 MuiPaper-rounded"
          >
            <div
              area-controls="panel1a-content"
              aria-disabled="false"
              aria-expanded="false"
              class="MuiButtonBase-root MuiAccordionSummary-root"
              role="button"
              tabindex="0"
            >
              <div
                class="MuiAccordionSummary-content"
              >
                <h4
                  class="MuiTypography-root MuiTypography-h4"
                >
                  Me
                </h4>
              </div>
              <div
                aria-disabled="false"
                aria-hidden="true"
                class="MuiButtonBase-root MuiIconButton-root MuiAccordionSummary-expandIcon MuiIconButton-edgeEnd"
              >
                <span
                  class="MuiIconButton-label"
                >
                  <svg
                    aria-hidden="true"
                    class="MuiSvgIcon-root"
                    focusable="false"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"
                    />
                  </svg>
                </span>
                <span
                  class="MuiTouchRipple-root"
                />
              </div>
            </div>
            <div
              class="MuiCollapse-container MuiCollapse-hidden"
              style="min-height: 0px;"
            >
              <div
                class="MuiCollapse-wrapper"
              >
                <div
                  class="MuiCollapse-wrapperInner"
                >
                  <div
                    role="region"
                  >
                    <div
                      class="MuiAccordionDetails-root"
                    >
                      <p
                        class="MuiTypography-root MuiTypography-body1"
                      >
                        Hello, come find me
                         
                        <a
                          class="MuiTypography-root MuiLink-root MuiLink-underlineHover twitter-follow-button MuiTypography-colorPrimary"
                          data-show-count="false"
                          href="https://twitter.com/NullishCoalesce?ref_src=twsrc%5Etfw"
                        >
                          Follow @TwitterDev
                        </a>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
`;
